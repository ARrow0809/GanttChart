### 解説：「初回だけパスワードを入力すれば、その後90日間ログイン状態が維持されるWebアプリ」

このアプリケーションは、**「サーバー」**と**「クライアント（ユーザーのWebブラウザ）」**が**「セッション」**と**「クッキー」**という仕組みを使って連携することで成り立っています。

#### 登場人物と役割

* **サーバー (Server):**
    * あなたが作成したPythonコード(`app.py`)が動いているコンピュータです。
    * 正しいパスワードを知っており、ログインを許可したり、ページの内容を送信したりする司令塔の役割を果たします。

* **クライアント (Client):**
    * ユーザーが操作するWebブラウザ（Google ChromeやSafariなど）のことです。
    * サーバーに「このページが見たい」と要求し、サーバーから送られてきたHTMLを表示する窓口です。

* **セッション (Session):**
    * サーバー側で「このユーザーはログイン済みか？」といった**状態を覚えておくための仕組み**です。ユーザー一人ひとりに個別のセッション情報が用意されます。

* **クッキー (Cookie):**
    * サーバーが発行した**「小さな身分証明書」**のようなものです。
    * サーバーから送られてきて、クライアント（ブラウザ）のPC内に保存されます。ブラウザは、次回以降そのサーバーにアクセスする際に、この身分証明書を自動的に提示します。

#### 動作のステップ・バイ・ステップ

##### ステップ1：最初の訪問と認証

1.  **ユーザーがアクセス:** あなたがブラウザで `http://127.0.0.1:5000/` を開きます。
2.  **サーバーの判断:** サーバーは「この人から身分証明書（クッキー）が提示されていないな」と判断し、「未ログイン」とみなします。そして「まずログインページに行ってください」とブラウザに指示します。
3.  **パスワード入力:** あなたはログインページでパスワード `gantt` を入力し、送信します。
4.  **認証と身分証明書の発行:**
    * サーバーはパスワードが正しいことを確認します。
    * 認証に成功した証として、サーバーは**「この人は90日間有効なログイン済みユーザーです」**というセッション情報を作成します。
    * そして、このセッション情報に紐づく、暗号化された**身分証明書（クッキー）**を発行し、ブラウザに送ります。
5.  **身分証明書の保管:** あなたのブラウザは、受け取った身分証明書（クッキー）をPC内の安全な場所に保管します。このとき、「有効期限は90日」という情報も一緒に記録されます。

##### ステップ2：再訪問（ブラウザを閉じた後など）

1.  **ユーザーが再アクセス:** 数日後、あなたが再び `http://127.0.0.1:5000/` を開きます。
2.  **身分証明書の自動提示:** ブラウザは「このサイトに行くのか。そういえば、前に貰った有効期限内の身分証明書があったな」と思い出し、リクエストと一緒に**自動的に身分証明書（クッキー）をサーバーに提示します**。あなたは何もする必要はありません。
3.  **サーバーの確認:** サーバーは提示された身分証明書を受け取り、それが偽造されておらず、有効期限内であることを確認します。そして「ああ、先日認証したAさんですね。どうぞお入りください」と判断します。
4.  **アクセス許可:** サーバーはログインページをスキップし、直接ガントチャートのページ本体を送ります。あなたはパスワードを入力することなく、すぐにページを見ることができます。

##### ステップ3：ログアウト

1.  **ログアウト操作:** あなたが「ログアウト」リンクをクリックします。
2.  **身分証明書の無効化:**
    * サーバーは「この人のセッション情報を破棄せよ」という命令を受け取ります。
    * サーバー側でセッション情報を削除するとともに、ブラウザに対しても「あなたの持っている身分証明書（クッキー）はもう無効なので捨ててください」と指示を出します。
    * これにより、あなたは未ログイン状態に戻ります。

#### なぜ「90日間」なのか？

コード内の `app.permanent_session_lifetime = timedelta(days=90)` という部分が、身分証明書の有効期限を90日に設定しています。この日数を変更すれば、ログインを維持する期間を自由にコントロールできます。

#### まとめ

つまりこのアプリケーションは、**「サーバーが発行した『90日間有効なデジタル身分証明書（クッキー）』をブラウザが保管し、サイトを訪れるたびに自動で提示することで、再度のパスワード入力を不要にする仕組み」**と言えます。これにより、最初の認証で安全性を確保しつつ、その後の利用者の手間を省き、利便性を高めているのです。